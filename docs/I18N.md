# Internationalisierung (i18n) - ScatterForge Plot

## √úbersicht

ScatterForge Plot unterst√ºtzt ab Version 6.2+ mehrsprachige Benutzeroberfl√§chen. Derzeit sind Deutsch (de) und Englisch (en) implementiert.

## Architektur

Das i18n-System basiert auf JSON-√úbersetzungsdateien und einem zentralen Manager:

```
i18n/
‚îú‚îÄ‚îÄ __init__.py              # Exports
‚îú‚îÄ‚îÄ manager.py               # I18nManager Klasse
‚îî‚îÄ‚îÄ translations/
    ‚îú‚îÄ‚îÄ de.json             # Deutsche √úbersetzungen
    ‚îî‚îÄ‚îÄ en.json             # Englische √úbersetzungen
```

## Verwendung

### √úbersetzungen im Code verwenden

```python
from i18n import tr

# Einfache √úbersetzung
text = tr("menu.file.title")  # "Datei" oder "File"

# Mit Variablen
text = tr("messages.group_created", name="MyGroup")  # "Gruppe 'MyGroup' erstellt"
```

### Sprachschema in JSON

√úbersetzungen sind hierarchisch organisiert:

```json
{
  "_language_name": "Deutsch",
  "_language_code": "de",

  "menu": {
    "file": {
      "title": "Datei",
      "load": "Daten laden...",
      "save_session": "Session speichern"
    }
  },

  "messages": {
    "group_created": "Gruppe '{name}' erstellt"
  }
}
```

### Sprachwechsel

1. **√úber die GUI**: Men√º ‚Üí Einstellungen ‚Üí Sprache ‚Üí Deutsch/English
2. **Programmatisch**:
   ```python
   from i18n import get_i18n

   i18n = get_i18n()
   i18n.set_language('en')
   ```

Die Sprachwahl wird automatisch in der Benutzerkonfiguration gespeichert und beim n√§chsten Start geladen.

## Neue √úbersetzungen hinzuf√ºgen

### 1. √úbersetzungsschl√ºssel in JSON-Dateien hinzuf√ºgen

F√ºgen Sie den neuen Schl√ºssel in **beide** Dateien (`de.json` und `en.json`) hinzu:

**de.json:**
```json
{
  "dialogs": {
    "new_feature": {
      "title": "Neues Feature",
      "description": "Dies ist ein neues Feature"
    }
  }
}
```

**en.json:**
```json
{
  "dialogs": {
    "new_feature": {
      "title": "New Feature",
      "description": "This is a new feature"
    }
  }
}
```

### 2. √úbersetzung im Code verwenden

```python
from i18n import tr

# Dialog erstellen
dialog = QDialog()
dialog.setWindowTitle(tr("dialogs.new_feature.title"))

label = QLabel(tr("dialogs.new_feature.description"))
```

## Implementierungsstatus

### ‚úÖ Vollst√§ndig implementiert

- i18n-Manager und Infrastruktur
- JSON-√úbersetzungsdateien (Deutsch/Englisch)
- Sprachwechsel-Men√º
- Konfigurationsspeicherung
- Hauptmen√º (Datei, Plot, Design, Einstellungen, Hilfe)

### üöß In Arbeit

Die √úbersetzungen f√ºr die folgenden Bereiche sind in den JSON-Dateien vorbereitet, m√ºssen aber noch im Code integriert werden:

- Sidebar-Buttons
- Options-Panel
- Kontext-Men√ºs
- Alle Dialoge (Export, Axes, Grid, Legend, etc.)
- Nachrichten und Fehlermeldungen

## Schrittweise Integration

Um bestehende UI-Elemente zu √ºbersetzen:

1. **Finden Sie den UI-Text** im Code, z.B.:
   ```python
   button = QPushButton("Daten laden")
   ```

2. **Identifizieren Sie den √úbersetzungsschl√ºssel** in `de.json` / `en.json`:
   ```json
   "sidebar": {
     "load": "üìÅ Laden"
   }
   ```

3. **Ersetzen Sie den Text** durch einen tr()-Aufruf:
   ```python
   button = QPushButton(tr("sidebar.load"))
   ```

## Neue Sprache hinzuf√ºgen

1. **Erstellen Sie eine neue JSON-Datei** in `i18n/translations/`:
   ```bash
   cp i18n/translations/de.json i18n/translations/fr.json
   ```

2. **Aktualisieren Sie die Metadaten**:
   ```json
   {
     "_language_name": "Fran√ßais",
     "_language_code": "fr",
     ...
   }
   ```

3. **√úbersetzen Sie alle Texte** in der neuen Datei

4. **Fertig!** Die neue Sprache erscheint automatisch im Sprach-Men√º

## Best Practices

1. **Konsistente Schl√ºssel-Struktur**: Verwenden Sie hierarchische Pfade wie `menu.file.load`
2. **Sprechende Namen**: Schl√ºssel sollten selbsterkl√§rend sein
3. **Variablen in geschweiften Klammern**: `"Datei {filename} geladen"`
4. **Beide Dateien aktualisieren**: F√ºgen Sie neue Schl√ºssel immer in alle Sprach-Dateien ein
5. **Fallback auf Englisch**: Falls eine √úbersetzung fehlt, wird automatisch Englisch verwendet

## Fehlerbehebung

### √úbersetzung wird nicht gefunden

Wenn ein Schl√ºssel nicht gefunden wird, erscheint der Schl√ºssel selbst als Text im UI. Pr√ºfen Sie:

1. Ist der Schl√ºssel in der JSON-Datei vorhanden?
2. Ist die JSON-Syntax korrekt? (Kommas, Klammern)
3. Stimmt der Pfad? (`menu.file.load` vs. `menu.files.load`)

### Sprache √§ndert sich nicht

- Die Sprach√§nderung erfordert einen Neustart der Anwendung
- Pr√ºfen Sie die Konfigurationsdatei: `~/.tubaf_scatter_plots/config.json`

## Technische Details

### I18nManager Klasse

Der `I18nManager` ist ein Singleton und bietet folgende Methoden:

- `set_language(lang_code: str)` - Setzt die aktuelle Sprache
- `get_language() -> str` - Gibt die aktuelle Sprache zur√ºck
- `get_available_languages() -> Dict[str, str]` - Listet verf√ºgbare Sprachen
- `tr(key: str, **kwargs) -> str` - √úbersetzt einen Schl√ºssel

### UserConfig Integration

Die Sprachwahl wird in der Benutzerkonfiguration gespeichert:

```python
config = get_user_config()
config.set_language('en')  # Sprache speichern
lang = config.get_language()  # Sprache laden
```

## Zuk√ºnftige Erweiterungen

M√∂gliche zuk√ºnftige Verbesserungen:

- [ ] Dynamischer Sprachwechsel ohne Neustart
- [ ] Weitere Sprachen (Franz√∂sisch, Spanisch, etc.)
- [ ] Automatische Erkennung der System-Sprache
- [ ] √úbersetzungseditor-Tool f√ºr Nicht-Programmierer
- [ ] Qt Linguist (.ts/.qm Dateien) Support

## Lizenz

Das i18n-System ist Teil von ScatterForge Plot und unterliegt derselben Lizenz.
